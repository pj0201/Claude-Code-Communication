# スマホでのLINE操作ガイド

LINE側（主にスマホ）で行うことを分かりやすく説明します。

---

## 📱 LINE側で行うこと（全体像）

```
1. LINE Developersでボット作成（PC/スマホブラウザ）
   ↓
2. QRコードでボットを友だち追加（スマホLINE）
   ↓
3. メッセージを送信（スマホLINE）
```

---

## ステップ1: ボット作成（PC/スマホブラウザ）

### 1-1. LINE Developersにアクセス

**PC or スマホのブラウザで:**
```
https://developers.line.biz/ja/
```

### 1-2. ログイン

1. 「ログイン」をタップ
2. **あなたの普段使っているLINEアカウント**でログイン
   - スマホのLINEアプリで認証が入ります

### 1-3. プロバイダー作成

1. 「作成」→「プロバイダーを作成」
2. プロバイダー名:
   ```
   Claude Code Tasks
   ```
   （任意の名前でOK）

### 1-4. チャネル作成

1. 「チャネルを作成」→「Messaging API」を選択
2. 以下を入力:

| 項目 | 入力例 |
|------|--------|
| **チャネル名** | `Claude Code Bot` |
| **チャネル説明** | `スマホからClaude Codeにタスク指示` |
| **大業種** | `個人` |
| **小業種** | `個人（その他）` |

3. 利用規約に同意
4. 「作成」をタップ

### 1-5. トークン取得

1. 作成したチャネルをタップ
2. 「Messaging API設定」タブ
3. 下にスクロール
4. **「チャネルアクセストークン」** → 「発行」をタップ
5. 表示されたトークンをコピー
   ```
   例: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```
   **→ このトークンは後でPC側で使います**

6. 「チャネル基本設定」タブ
7. **「チャネルシークレット」**をコピー
   ```
   例: 1234567890abcdef...
   ```
   **→ このシークレットも後でPC側で使います**

---

## ステップ2: 自動応答をOFFにする（重要！）

### 2-1. 応答メッセージをOFFに

**Messaging API設定画面で:**

1. 下にスクロール
2. **「応答メッセージ」を探す**
3. 「編集」をタップ
4. **「応答メッセージ」をOFFにする**
   - これをOFFにしないと、LINEの自動応答が邪魔になります

5. **「あいさつメッセージ」もOFFにする**

**なぜOFFにする?**
- ONのままだと、LINE公式アカウントの定型文が自動で送信される
- Claude Codeからの応答と混ざって分かりにくくなる

---

## ステップ3: ボットを友だち追加（スマホLINE）

### 3-1. QRコードを表示

**PC/スマホブラウザで:**
1. LINE Developers → Messaging API設定
2. 下にスクロール
3. **「ボット情報」→「QRコード」**を表示

### 3-2. スマホで読み取り

**スマホのLINEアプリで:**

1. LINEアプリを開く
2. 「ホーム」→ 右上の「友だち追加」アイコン
3. 「QRコード」をタップ
4. PCの画面に表示されているQRコードをカメラで読み取る
   - または、スマホブラウザで表示したQRコードをスクショして、「マイQRコード」→ギャラリーから選択
5. 「追加」をタップ

### 3-3. 友だちリストに追加完了

- 友だちリストに「Claude Code Bot」が表示されます
- これで準備完了！

---

## ステップ4: メッセージを送る（スマホLINE）

### 4-1. トークを開く

**スマホのLINEアプリで:**
1. 友だちリストから「Claude Code Bot」をタップ
2. トーク画面が開きます

### 4-2. 最初のメッセージ

**以下のようなメッセージを送ってみてください:**

```
テスト
```

または

```
今のプロジェクトの状態を教えて
```

### 4-3. 応答を確認

**まず、すぐに以下の応答が来ます:**
```
📝 受付中...

テスト

Claude Codeに転送しています。
```

**その後、Claude Codeから応答が来ます:**
```
🤖 Claude Code:

テストメッセージを受信しました。
システムは正常に動作しています。
```

---

## ステップ5: 画像を送る（スマホLINE）

### 5-1. 画像を添付

**スマホのLINEアプリで:**
1. トーク画面で「画像」アイコンをタップ
2. スクリーンショットや写真を選択
3. 送信

**特別なコマンドは不要です！**
- 画像を送るだけで、Claude Codeが自動で分析します

### 5-2. 応答例

```
📷 画像を受信しました。

Claude Codeに転送しています...
```

```
🤖 Claude Code:

このスクリーンショットはエラー画面ですね。

TypeError: Cannot read property 'name' of undefined

この行を修正してください...
```

---

## 💡 よくある使い方

### テキストメッセージ例

```
バックアップしておいて
```

```
host-friendly-checkinのテストを実行して
```

```
コミットしてGitHubにプッシュして
```

```
今のタスクの状態を教えて
```

### 画像メッセージ例

**エラー画面を送る:**
- PC画面のスクリーンショットを撮る
- LINEで送信
- Claude Codeがエラーを解析して解決策を提案

**手書きメモを送る:**
- 紙に図を描く
- 写真を撮る
- LINEで送信
- Claude Codeが図を解釈してコード化

---

## 🔧 トラブルシューティング

### Q1: メッセージが返ってこない

**確認すること:**

1. **PC側のサーバーが起動しているか?**
   - Worker3（Claude Code）
   - LINE Bridge
   - ngrok

2. **Webhook URLが正しく設定されているか?**
   - LINE Developers → Messaging API設定
   - Webhook URL: `https://xxxx.ngrok.io/webhook`
   - 「検証」で成功するか確認

### Q2: 「応答がありません」と表示される

**原因:**
- 応答メッセージがONになっている

**解決策:**
1. LINE Developers → Messaging API設定
2. 「応答メッセージ」を編集
3. **OFFにする**

### Q3: 自動で定型文が送られてくる

**原因:**
- あいさつメッセージ・応答メッセージがONになっている

**解決策:**
1. LINE Developers → Messaging API設定
2. 「あいさつメッセージ」→ OFF
3. 「応答メッセージ」→ OFF

### Q4: QRコードが見つからない

**確認:**
1. LINE Developers → チャネルを選択
2. 「Messaging API設定」タブ
3. 下にスクロール
4. 「ボット情報」セクション
5. QRコードが表示されています

---

## 📝 まとめ

### LINE側（スマホ）で行うこと

1. ✅ LINE Developersでボット作成（1回のみ）
2. ✅ トークン・シークレット取得（PC側で使用）
3. ✅ 応答メッセージをOFF（重要！）
4. ✅ QRコードでボットを友だち追加（1回のみ）
5. ✅ 普通にメッセージや画像を送る

**あとは普通にLINEを使うだけです！**

---

## 🎯 次のステップ

LINE側の設定が終わったら、PC側の設定を行います:
- [LINE_ACCOUNT_SETUP.md](./LINE_ACCOUNT_SETUP.md) のステップ5以降を参照

**PC側で行うこと:**
1. 環境変数設定（トークン・シークレット）
2. Pythonパッケージインストール
3. サーバー起動（Worker3、LINE Bridge、ngrok）
4. Webhook URL設定

---

これで、スマホから快適にClaude Codeを操作できます！
