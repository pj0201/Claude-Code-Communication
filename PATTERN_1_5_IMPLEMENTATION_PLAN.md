# Pattern 1.5 å®Ÿè£…è¨ˆç”»æ›¸
**å®Ÿç”¨çš„ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ - æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**

**æ±ºå®šæ—¥**: 2025-10-20
**åˆ¤æ–­æ ¹æ‹ **: åˆæœŸæ®µéšã§ã®éåº¦ãªå®Ÿè£…ã¯å±é™º + AIé€²åŒ–é€Ÿåº¦ã‚’è€ƒæ…®ã—ãŸæŸ”è»Ÿæ€§ç¢ºä¿
**ç›®æ¨™æœŸé–“**: 5-8æ—¥
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…æº–å‚™å®Œäº†

---

## ğŸ“Š Pattern 1.5 æ¦‚è¦

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
3å±¤æ§‹æˆï¼ˆæ®µéšçš„ã«å¼·åŒ–å¯èƒ½ï¼‰:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å±¤1: å®Ÿè¡Œæ™‚ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â”œ /tmp/skill_learning.json
  â”” ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆé«˜é€Ÿã‚¢ã‚¯ã‚»ã‚¹ï¼‰

â†“ è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆæ¯æ™‚é–“ or é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆå¾Œï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å±¤2: æ°¸ç¶šåŒ–ä¿è­·ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â”œ /a2a_system/shared/learned_patterns/
  â”‚  â”” backup_YYYYMMDD_HHMMSS.json
  â”” æ—¥æ¬¡ä¸–ä»£ç®¡ç†ï¼ˆæœ€æ–°10ä¸–ä»£ä¿æŒï¼‰

â†“ æœˆæ¬¡é›†è¨ˆå‡¦ç†

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å±¤3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ°¸ç¶šåŒ–ï¼ˆWIKIï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â”” GitHub WIKI
     â”” SkillLearningMonthly/2025-10.md
        â”œ ã‚¹ã‚­ãƒ«åˆ¥çµ±è¨ˆ
        â”œ ä¸Šä½å­¦ç¿’ãƒ‘ã‚¿ãƒ¼ãƒ³
        â”” æ”¹å–„ææ¡ˆ
```

### è©•ä¾¡æŒ‡æ¨™
| é …ç›® | ç›®æ¨™ | å®Ÿè£…é›£åº¦ |
|------|------|--------|
| å …ç‰¢æ€§ | 8/10ï¼ˆååˆ†å®Ÿç”¨çš„ï¼‰ | âœ… |
| ä¿å®ˆæ€§ | 7/10ï¼ˆå°†æ¥ã®æ‹¡å¼µå®¹æ˜“ï¼‰ | âœ… |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 7/10ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ï¼‰ | âœ… |
| å®Ÿè£…æœŸé–“ | 5-8æ—¥ | âœ… |
| ãƒªã‚¹ã‚¯ | æœ€å°é™ | âœ… |

---

## ğŸ¯ å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºç¤å®Ÿè£…ï¼ˆ2-3æ—¥ï¼‰

#### Task 1.1: JSONãƒ™ãƒ¼ã‚¹æ°¸ç¶šåŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `a2a_system/skills/learning_persistence.py`

```python
# ä¸»è¦ã‚¯ãƒ©ã‚¹æ§‹æˆ
class LearningPersistenceManager:
    """å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ã‚’ç®¡ç†"""

    def __init__(self, tmp_path="/tmp/skill_learning.json",
                 backup_path="/a2a_system/shared/learned_patterns/"):
        self.tmp_path = tmp_path
        self.backup_path = backup_path

    def load_learning_data(self) -> dict:
        """ç¾åœ¨ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒ¡ãƒ¢ãƒªï¼‰"""
        pass

    def save_learning_data(self, data: dict) -> bool:
        """å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆä¸¡å±¤ã«ï¼‰"""
        # å±¤1: /tmp ã«å³åº§ã«ä¿å­˜
        # å±¤2: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚‚ä¿å­˜
        pass

    def create_backup(self) -> str:
        """ç¾åœ¨ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ"""
        # ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ããƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        pass

    def cleanup_old_backups(self, keep_count=10) -> int:
        """å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤ï¼ˆä¸–ä»£ç®¡ç†ï¼‰"""
        pass

    def get_backup_summary(self) -> dict:
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®çµ±è¨ˆæƒ…å ±"""
        pass
```

**å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] ã‚¯ãƒ©ã‚¹å®šç¾©ã¨åŸºæœ¬ãƒ¡ã‚½ãƒƒãƒ‰
- [ ] JSONã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã€ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ç­‰ï¼‰
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆå„ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰

---

#### Task 1.2: SkillSelector ã¸ã®çµ±åˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `a2a_system/skills/skill_selector.py` (ä¿®æ­£)

```python
# æ—¢å­˜ã® _score_skills() ãƒ¡ã‚½ãƒƒãƒ‰ã®å¾Œã«è¿½åŠ 

def _persist_learning_outcome(self, selected_skill: SkillType,
                              task_classification, execution_result):
    """ã‚¹ã‚­ãƒ«é¸æŠã¨å®Ÿè¡Œçµæœã‚’æ°¸ç¶šåŒ–"""

    learning_record = {
        "timestamp": datetime.now().isoformat(),
        "skill_type": selected_skill.value,
        "task_type": task_classification.task_type,
        "file_type": task_classification.file_type,
        "confidence": task_classification.confidence,
        "execution_result": execution_result,
        "success": execution_result.get("success", False),
        "processing_time": execution_result.get("processing_time", 0)
    }

    # LearningPersistenceManager ã‚’ä½¿ç”¨
    self.persistence_manager.append_record(learning_record)

    # å®šæœŸçš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒˆãƒªã‚¬ãƒ¼
    if self._should_trigger_backup():
        self.persistence_manager.create_backup()
```

**å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] LearningPersistenceManager ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–
- [ ] _persist_learning_outcome() ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- [ ] execute() ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ã®å‘¼ã³å‡ºã—
- [ ] ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

---

#### Task 1.3: æ°¸ç¶šåŒ–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®åˆæœŸåŒ–
**å®Ÿè£…å†…å®¹**: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¨ã‚¢ã‚¯ã‚»ã‚¹æ¨©ç®¡ç†

```bash
# å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p /a2a_system/shared/learned_patterns/

# ã‚¢ã‚¯ã‚»ã‚¹æ¨©è¨­å®š
chmod 755 /a2a_system/shared/learned_patterns/

# åˆæœŸåŒ–ãƒ•ã‚¡ã‚¤ãƒ«
echo '{"backups": [], "created_at": "'$(date -I)'"}' \
  > /a2a_system/shared/learned_patterns/.index
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆã¨æ¨©é™è¨­å®š
- [ ] åˆæœŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
- [ ] ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ç¢ºèªï¼ˆè­¦å‘Šè¨­å®šï¼‰

---

### Phase 2: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¿è­·ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ï¼ˆ2-3æ—¥ï¼‰

#### Task 2.1: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `a2a_system/skills/backup_scheduler.py` (æ–°è¦)

```python
import schedule
import threading
from learning_persistence import LearningPersistenceManager

class BackupScheduler:
    """è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°"""

    def __init__(self, manager: LearningPersistenceManager):
        self.manager = manager
        self.scheduler = schedule.Scheduler()
        self._setup_schedules()

    def _setup_schedules(self):
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š"""
        # æ¯æ™‚0åˆ†ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        self.scheduler.every().hour.at(":00").do(self._hourly_backup)

        # æ¯æ—¥æ·±å¤œ2æ™‚ã«ãƒ•ãƒ«çµ±è¨ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        self.scheduler.every().day.at("02:00").do(self._daily_full_backup)

        # å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æ¯é€±å‰Šé™¤
        self.scheduler.every().monday.at("03:00").do(self._cleanup_old_backups)

    def _hourly_backup(self):
        """æ™‚é–“ã”ã¨ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"""
        backup_path = self.manager.create_backup()
        logging.info(f"âœ… Hourly backup created: {backup_path}")

    def _daily_full_backup(self):
        """æ—¥æ¬¡ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"""
        backup_path = self.manager.create_backup()
        logging.info(f"âœ… Daily full backup created: {backup_path}")

    def _cleanup_old_backups(self):
        """å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤"""
        removed = self.manager.cleanup_old_backups(keep_count=10)
        logging.info(f"ğŸ§¹ Cleaned up {removed} old backups")

    def start(self):
        """ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©é–‹å§‹"""
        def _run_scheduler():
            while True:
                self.scheduler.run_pending()
                time.sleep(60)

        thread = threading.Thread(target=_run_scheduler, daemon=True)
        thread.start()
        logging.info("ğŸš€ Backup scheduler started")
```

**å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] schedule ãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ
- [ ] ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šï¼ˆæ¯æ™‚ã€æ¯æ—¥ã€æ¯é€±ï¼‰
- [ ] ãƒ­ã‚°å‡ºåŠ›
- [ ] ãƒ†ã‚¹ãƒˆï¼ˆæ™‚é–“ãƒˆãƒªã‚¬ãƒ¼ï¼‰

---

#### Task 2.2: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§ã™ã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `a2a_system/skills/learning_persistence.py` (æ‹¡å¼µ)

```python
def restore_from_backup(self, backup_file: str) -> bool:
    """æŒ‡å®šã•ã‚ŒãŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§"""
    try:
        with open(backup_file, 'r') as f:
            data = json.load(f)

        # /tmp ã«å¾©æ—§
        self.save_learning_data(data)
        logging.info(f"âœ… Restored from backup: {backup_file}")
        return True
    except Exception as e:
        logging.error(f"âŒ Restore failed: {e}")
        return False

def list_available_backups(self) -> list:
    """åˆ©ç”¨å¯èƒ½ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§"""
    backups = sorted(glob.glob(f"{self.backup_path}/backup_*.json"))
    return [{"file": b, "timestamp": self._extract_timestamp(b)} for b in backups]

def get_latest_backup(self) -> str:
    """æœ€æ–°ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’å–å¾—"""
    backups = self.list_available_backups()
    return backups[-1]["file"] if backups else None
```

**å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] restore_from_backup() å®Ÿè£…
- [ ] list_available_backups() å®Ÿè£…
- [ ] å¾©æ—§ãƒ†ã‚¹ãƒˆ

---

### Phase 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ°¸ç¶šåŒ–ï¼†WIKIé€£æºï¼ˆ2-3æ—¥ï¼‰

#### Task 3.1: æœˆæ¬¡ã‚µãƒãƒªãƒ¼ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `a2a_system/skills/monthly_summary_generator.py` (æ–°è¦)

```python
class MonthlySummaryGenerator:
    """å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®æœˆæ¬¡ã‚µãƒãƒªãƒ¼ç”Ÿæˆ"""

    def __init__(self, learning_data_dir: str):
        self.learning_data_dir = learning_data_dir

    def generate_summary(self, year: int, month: int) -> dict:
        """æœˆæ¬¡ã®ã‚µãƒãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ"""
        summary = {
            "period": f"{year}-{month:02d}",
            "skill_statistics": self._calculate_skill_stats(),
            "top_patterns": self._extract_top_patterns(),
            "accuracy_trends": self._analyze_accuracy_trends(),
            "recommendations": self._generate_recommendations()
        }
        return summary

    def _calculate_skill_stats(self) -> dict:
        """ã‚¹ã‚­ãƒ«åˆ¥ã®çµ±è¨ˆæƒ…å ±"""
        # å„ã‚¹ã‚­ãƒ«ã”ã¨ã®å®Ÿè¡Œå›æ•°ã€æˆåŠŸç‡ã€å¹³å‡å‡¦ç†æ™‚é–“
        pass

    def _extract_top_patterns(self) -> list:
        """æœ€é »å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¸Šä½5ï¼‰"""
        # ã‚¿ã‚¹ã‚¯/ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã®çµ„ã¿åˆã‚ã›
        pass

    def _analyze_accuracy_trends(self) -> dict:
        """åˆ†é¡ç²¾åº¦ã®ãƒˆãƒ¬ãƒ³ãƒ‰"""
        # æœˆåˆ vs æœˆæœ«ã®ç²¾åº¦æ¯”è¼ƒ
        pass

    def _generate_recommendations(self) -> list:
        """æ”¹å–„ææ¡ˆ"""
        # å¼±ã„é ˜åŸŸã€æ”¹å–„ã™ã¹ãé ˜åŸŸ
        pass

    def generate_markdown(self, summary: dict) -> str:
        """Markdownå½¢å¼ã§å‡ºåŠ›"""
        md = f"""# ã‚¹ã‚­ãƒ«å­¦ç¿’ã‚µãƒãƒªãƒ¼ {summary['period']}

## ğŸ“Š ã‚¹ã‚­ãƒ«åˆ¥çµ±è¨ˆ
{self._format_skill_stats(summary['skill_statistics'])}

## ğŸ” ä¸Šä½å­¦ç¿’ãƒ‘ã‚¿ãƒ¼ãƒ³
{self._format_patterns(summary['top_patterns'])}

## ğŸ“ˆ ç²¾åº¦ãƒˆãƒ¬ãƒ³ãƒ‰
{self._format_trends(summary['accuracy_trends'])}

## ğŸ’¡ æ”¹å–„ææ¡ˆ
{self._format_recommendations(summary['recommendations'])}
"""
        return md
```

**å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] generate_summary() å®Ÿè£…
- [ ] çµ±è¨ˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- [ ] Markdownç”Ÿæˆ
- [ ] ãƒ†ã‚¹ãƒˆï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰

---

#### Task 3.2: GitHub WIKI ã¸ã®è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
**ãƒ•ã‚¡ã‚¤ãƒ«**: `a2a_system/skills/wiki_uploader.py` (æ–°è¦)

```python
class WikiUploader:
    """GitHub WIKI ã¸ã®è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"""

    def __init__(self, repo_path: str, github_token: str = None):
        self.repo_path = repo_path
        self.wiki_path = f"{repo_path}.wiki"
        self.github_token = github_token or os.getenv("GITHUB_TOKEN")

    def upload_monthly_summary(self, year: int, month: int,
                               markdown_content: str) -> bool:
        """æœˆæ¬¡ã‚µãƒãƒªãƒ¼ã‚’WIKIã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"""

        filename = f"SkillLearning-{year}-{month:02d}.md"
        wiki_file = f"{self.wiki_path}/{filename}"

        try:
            # ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿
            with open(wiki_file, 'w', encoding='utf-8') as f:
                f.write(markdown_content)

            # Git ã‚³ãƒŸãƒƒãƒˆ
            self._commit_to_wiki(filename, f"Monthly summary for {year}-{month:02d}")

            logging.info(f"âœ… Uploaded to WIKI: {filename}")
            return True
        except Exception as e:
            logging.error(f"âŒ WIKI upload failed: {e}")
            return False

    def _commit_to_wiki(self, filename: str, commit_message: str):
        """WIKIãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚³ãƒŸãƒƒãƒˆ"""
        import subprocess

        cwd = self.wiki_path
        subprocess.run(["git", "add", filename], cwd=cwd)
        subprocess.run(["git", "commit", "-m", commit_message], cwd=cwd)
        subprocess.run(["git", "push"], cwd=cwd)
```

**å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] WikiUploader ã‚¯ãƒ©ã‚¹å®Ÿè£…
- [ ] WIKI ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿
- [ ] Git ã‚³ãƒŸãƒƒãƒˆ
- [ ] ãƒ†ã‚¹ãƒˆï¼ˆãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼‰

---

#### Task 3.3: æœˆæ¬¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã®çµ±åˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `backup_scheduler.py` (æ‹¡å¼µ)

```python
def _monthly_wiki_update(self):
    """æœˆæ¬¡WIKIæ›´æ–°"""
    from datetime import datetime, timedelta

    # å…ˆæœˆã®ãƒ‡ãƒ¼ã‚¿ã‚’é›†è¨ˆ
    today = datetime.now()
    first_of_month = today.replace(day=1)
    last_month = first_of_month - timedelta(days=1)

    year = last_month.year
    month = last_month.month

    # ã‚µãƒãƒªãƒ¼ç”Ÿæˆ
    summary_gen = MonthlySummaryGenerator(self.manager.backup_path)
    summary = summary_gen.generate_summary(year, month)
    markdown = summary_gen.generate_markdown(summary)

    # WIKI ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    uploader = WikiUploader(repo_path="/home/planj/Claude-Code-Communication")
    success = uploader.upload_monthly_summary(year, month, markdown)

    if success:
        logging.info(f"âœ… Monthly WIKI update completed for {year}-{month:02d}")
    else:
        logging.error(f"âŒ Monthly WIKI update failed for {year}-{month:02d}")

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã«è¿½åŠ 
self.scheduler.every().month.do(self._monthly_wiki_update)
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã«æœˆæ¬¡å‡¦ç†ã‚’è¿½åŠ 
- [ ] åˆå›å®Ÿè¡Œãƒ†ã‚¹ãƒˆ

---

### Phase 4: çµ±åˆãƒ†ã‚¹ãƒˆã¨æœ¬ç•ªæŠ•å…¥ï¼ˆ1-2æ—¥ï¼‰

#### Task 4.1: ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `tests/test_pattern_1_5_e2e.py` (æ–°è¦)

```python
class TestPattern15E2E(unittest.TestCase):
    """Pattern 1.5 çµ±åˆãƒ†ã‚¹ãƒˆ"""

    def setUp(self):
        """ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆæœŸåŒ–"""
        self.tmp_dir = tempfile.mkdtemp()
        self.backup_dir = tempfile.mkdtemp()
        self.manager = LearningPersistenceManager(
            tmp_path=f"{self.tmp_dir}/skill_learning.json",
            backup_path=self.backup_dir
        )

    def test_normal_flow(self):
        """é€šå¸¸ãƒ•ãƒ­ãƒ¼: å®Ÿè¡Œ â†’ ä¿å­˜ â†’ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— â†’ WIKI"""
        # 1. ãƒ‡ãƒ¼ã‚¿ä¿å­˜
        test_data = {"skill": "code_analysis", "success": True}
        self.manager.save_learning_data(test_data)

        # 2. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
        backup_file = self.manager.create_backup()
        self.assertTrue(os.path.exists(backup_file))

        # 3. å¾©æ—§ãƒ†ã‚¹ãƒˆ
        self.manager.cleanup_old_backups(keep_count=0)
        restored = self.manager.restore_from_backup(backup_file)
        self.assertTrue(restored)

    def test_recovery_from_tmp_loss(self):
        """/tmp å–ªå¤±æ™‚ã®å¾©æ—§ãƒ†ã‚¹ãƒˆ"""
        # 1. ãƒ‡ãƒ¼ã‚¿ä¿å­˜
        test_data = {"skill": "code_analysis"}
        self.manager.save_learning_data(test_data)

        # 2. /tmp ã‚’å‰Šé™¤ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
        os.remove(f"{self.tmp_dir}/skill_learning.json")

        # 3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§
        backups = self.manager.list_available_backups()
        self.assertGreater(len(backups), 0)
        restored = self.manager.restore_from_backup(backups[0]["file"])
        self.assertTrue(restored)

    def test_backup_cleanup(self):
        """ä¸–ä»£ç®¡ç†ãƒ†ã‚¹ãƒˆ"""
        # 15å€‹ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
        for i in range(15):
            self.manager.create_backup()

        # 10å€‹ã¾ã§å‰Šé™¤
        removed = self.manager.cleanup_old_backups(keep_count=10)
        self.assertEqual(removed, 5)

        # ç¢ºèª
        backups = self.manager.list_available_backups()
        self.assertEqual(len(backups), 10)

    def test_monthly_summary_generation(self):
        """æœˆæ¬¡ã‚µãƒãƒªãƒ¼ç”Ÿæˆãƒ†ã‚¹ãƒˆ"""
        summary_gen = MonthlySummaryGenerator(self.backup_dir)
        summary = summary_gen.generate_summary(2025, 10)

        self.assertEqual(summary["period"], "2025-10")
        self.assertIn("skill_statistics", summary)
        self.assertIn("top_patterns", summary)
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] é€šå¸¸ãƒ•ãƒ­ãƒ¼ ãƒ†ã‚¹ãƒˆæˆåŠŸ
- [ ] å¾©æ—§ãƒ†ã‚¹ãƒˆ æˆåŠŸ
- [ ] ä¸–ä»£ç®¡ç†ãƒ†ã‚¹ãƒˆ æˆåŠŸ
- [ ] ã‚µãƒãƒªãƒ¼ç”Ÿæˆãƒ†ã‚¹ãƒˆ æˆåŠŸ

---

#### Task 4.2: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
**ãƒ†ã‚¹ãƒˆé …ç›®**:
- ä¿å­˜ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: < 100ms
- å¾©æ—§ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: < 500ms
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ: < 200ms
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: < 50MB

---

#### Task 4.3: æœ¬ç•ªç’°å¢ƒã¸ã®æŠ•å…¥
**æ‰‹é †**:
1. ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©èµ·å‹•ç¢ºèª
2. ãƒ­ã‚°å‡ºåŠ›ç¢ºèª
3. åˆå›ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆåŠŸç¢ºèª
4. SkillSelector ã¨ã®çµ±åˆãƒ†ã‚¹ãƒˆ
5. æœ¬ç•ªç¨¼åƒé–‹å§‹

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆå®Ÿè£…å¾Œï¼‰

```
a2a_system/skills/
â”œâ”€â”€ learning_persistence.py        âœ¨ NEW
â”‚   â””â”€â”€ LearningPersistenceManager
â”œâ”€â”€ backup_scheduler.py              âœ¨ NEW
â”‚   â””â”€â”€ BackupScheduler
â”œâ”€â”€ monthly_summary_generator.py     âœ¨ NEW
â”‚   â””â”€â”€ MonthlySummaryGenerator
â”œâ”€â”€ wiki_uploader.py                 âœ¨ NEW
â”‚   â””â”€â”€ WikiUploader
â”œâ”€â”€ skill_selector.py                (ä¿®æ­£)
â”‚   â””â”€â”€ _persist_learning_outcome() è¿½åŠ 
â””â”€â”€ ...

a2a_system/shared/learned_patterns/
â”œâ”€â”€ backup_20251020_120000.json
â”œâ”€â”€ backup_20251020_130000.json
â””â”€â”€ .index

tests/
â””â”€â”€ test_pattern_1_5_e2e.py          âœ¨ NEW
```

---

## ğŸ¯ ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æœŸé–“ | å†…å®¹ | æˆåŠŸåŸºæº– |
|---|---|---|---|
| **M1** | 2-3æ—¥ | JSONãƒ™ãƒ¼ã‚¹æ°¸ç¶šåŒ– + çµ±åˆ | Unit test 100% pass |
| **M2** | 2-3æ—¥ | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¿è­· + ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ© | è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‹•ä½œç¢ºèª |
| **M3** | 2-3æ—¥ | æœˆæ¬¡ã‚µãƒãƒªãƒ¼ + WIKI | Markdownç”Ÿæˆ + WIKI ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æˆåŠŸ |
| **M4** | 1-2æ—¥ | E2E ãƒ†ã‚¹ãƒˆ + æœ¬ç•ªæŠ•å…¥ | å…¨ãƒ†ã‚¹ãƒˆåˆæ ¼ + æœ¬ç•ªç¨¼åƒ |
| **å®Œäº†** | **5-8æ—¥** | **Pattern 1.5 å®Œæˆ** | âœ… æœ¬ç•ªç’°å¢ƒã§ç¨¼åƒä¸­ |

---

## ğŸš€ æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã®åˆ¤å®šåŸºæº–ï¼ˆ3-6ãƒ¶æœˆå¾Œï¼‰

### Pattern 2/3 ã¸ã®ç§»è¡Œåˆ¤å®š
```
ä»¥ä¸‹ã®æ¡ä»¶ãŒæº€ãŸã•ã‚ŒãŸã‚‰ã€learning-engine-prod çµ±åˆã‚’æ¤œè¨:

âœ“ æ¡ä»¶1: 3ãƒ¶æœˆä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ãŒè“„ç©
âœ“ æ¡ä»¶2: æœˆæ¬¡ã‚µãƒãƒªãƒ¼ã‹ã‚‰æ˜ç¢ºãª ãƒ‘ã‚¿ãƒ¼ãƒ³éœ€è¦ãŒè¦‹ãˆã‚‹
âœ“ æ¡ä»¶3: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚„MLåˆ†æã®å®Ÿè£…æ ¹æ‹ ãŒç¢ºç«‹
âœ“ æ¡ä»¶4: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…·ä½“çš„ãªè¦æœ›ãŒã‚ã‚‹

åˆ¤å®šçµæœ:
  - å…¨æ¡ä»¶æº€ãŸã™ â†’ Pattern 2/3 å®Ÿè£…é–‹å§‹
  - ä¸€éƒ¨æ¡ä»¶ã®ã¿ â†’ ã•ã‚‰ã«3ãƒ¶æœˆå»¶é•·ã—ã¦å†åˆ¤å®š
  - æ¡ä»¶æœªæº€è¶³ â†’ Pattern 1.5 ã§ç¶™ç¶š
```

---

## âš ï¸ ãƒªã‚¹ã‚¯ç®¡ç†

| ãƒªã‚¹ã‚¯ | ç¢ºç‡ | å½±éŸ¿ | å¯¾ç­– |
|--------|------|------|------|
| ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ä¸è¶³ | ä½ | ä¸­ | æœˆæ¬¡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€å®¹é‡ç›£è¦– |
| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç ´æ | æ¥µä½ | é«˜ | æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ã€è¤‡æ•°ä¸–ä»£ä¿å­˜ |
| WIKI ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¤±æ•— | ä½ | ä½ | è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã€ãƒ­ã‚°è¨˜éŒ² |
| ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©åœæ­¢ | ä½ | ä¸­ | ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã€å®šæœŸç¢ºèª |

---

## ğŸ’¡ AIé€²åŒ–ã¸ã®é©å¿œ

Pattern 1.5 ã®æŸ”è»Ÿæ€§:

```
2025å¹´11æœˆ: æ–°ã—ã„ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢APIå…¬é–‹
  â†’ learning-engine-prod ã¨ã®çµ±åˆä»•æ§˜ãŒæ›´æ–°ã•ã‚Œã‚‹
  â†’ Pattern 1.5 ãƒ™ãƒ¼ã‚¹ãªã‚‰ã€ç°¡å˜ã«ç½®ãæ›ãˆå¯èƒ½

2025å¹´12æœˆ: ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚­ãƒ«åˆ†é¡ãŒæ¨™æº–åŒ–
  â†’ æ–°ã—ã„åˆ†é¡æ–¹å¼ã¸ã®ç§»è¡ŒãŒå¿…è¦
  â†’ Pattern 1.5 ã¯ JSONå½¢å¼ã®ãŸã‚ã€ã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µãŒå®¹æ˜“

2026å¹´: AGIå‘ã‘ã‚¹ã‚­ãƒ«å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ æ¨™æº–åŒ–
  â†’ æ–°ã—ã„ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãŒç¢ºç«‹
  â†’ Pattern 1.5 ãƒ™ãƒ¼ã‚¹ãªã‚‰ã€æœ€å°é™ã®æ”¹ä¿®ã§å¯¾å¿œå¯èƒ½
```

---

**ä½œæˆ**: Claude Code
**åˆ¤æ–­**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èªæ¸ˆã¿ âœ…
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…é–‹å§‹æº–å‚™å®Œäº†
